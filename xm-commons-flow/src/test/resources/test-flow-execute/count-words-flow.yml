---
flows:
- key: "count-long-words-flow"
  startStep: "split_words"
  steps:
  - key: "split_words"
    typeKey: "groovyAction"
    type: "ACTION"
    snippets:
        groovyAction:
            content: "[a:[b:lepContext.flow.input.split('\\\\W+')]]"
            extension: "groovy"
    next: "words_to_length"
  - key: "words_to_length"
    typeKey: "groovyAction"
    type: "ACTION"
    isIterable: true
    iterableJsonPath: "$.a.b"
    removeNullOutputForIterableResult: true
    snippets:
        groovyAction:
            content: "lepContext.step.iterationItem.length() >= 4 ? lepContext.step.iterationItem.length() : null"
            extension: "groovy"
    next: "sum_chars"
  - key: "sum_chars"
    typeKey: "groovyAction"
    type: "ACTION"
    snippets:
        groovyAction:
            content: "lepContext.step.input.sum()"
            extension: "groovy"
  trigger:
    typeKey: "httpkey"
    parameters:
      method: "GET"
      url: "/api/orders"
